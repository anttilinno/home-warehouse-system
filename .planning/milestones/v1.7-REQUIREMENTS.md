# Requirements Archive: v1.7 Modular Settings

**Archived:** 2026-02-13
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: Home Warehouse System

**Defined:** 2026-02-12
**Core Value:** Reliable inventory access anywhere -- online or offline -- with seamless sync

## v1.7 Requirements

Requirements for Modular Settings milestone. Each maps to roadmap phases.

### Settings Hub

- [ ] **HUB-01**: Settings landing page renders iOS-style grouped rows with icons, labels, descriptions, and chevron navigation
- [ ] **HUB-02**: Settings rows show live preview of current value (e.g., "Dark", "English", "DD/MM/YYYY")
- [ ] **HUB-03**: Settings grouped into sections: Profile card at top, Preferences group (Appearance, Language, Regional Formats), System & Security group (Security, Notifications, Data & Storage)
- [ ] **HUB-04**: Shared settings layout with desktop sidebar navigation and responsive mobile layout
- [ ] **HUB-05**: Back navigation from each subpage returns to settings hub
- [ ] **HUB-06**: All navigation labels translated (en, et, ru)

### Profile

- [ ] **PROF-01**: Profile subpage renders existing name/email editing
- [ ] **PROF-02**: Profile subpage renders existing avatar upload/change
- [ ] **PROF-03**: Profile card on settings hub shows current avatar, name, and email

### Appearance

- [ ] **APPR-01**: Three-way theme selector: Light, Dark, System
- [ ] **APPR-02**: Theme change applies instantly without page reload
- [ ] **APPR-03**: Theme preference persists to backend for cross-device sync
- [ ] **APPR-04**: Theme loads without flash on page load (next-themes handles)
- [ ] **APPR-05**: CSS dark mode variant fix applied (Tailwind v4 `:where` selector)

### Language

- [ ] **LANG-01**: Language subpage surfaces existing 3-language selector (en, et, ru)
- [ ] **LANG-02**: Language preference persists to backend for cross-device sync

### Regional Formats

- [ ] **FMTS-01**: Regional Formats subpage renders existing date format settings
- [ ] **FMTS-02**: Regional Formats subpage renders existing time format settings
- [ ] **FMTS-03**: Regional Formats subpage renders existing number format settings

### Security

- [ ] **SECU-01**: Security subpage renders existing password change form
- [ ] **SECU-02**: Security subpage renders existing active sessions management
- [ ] **SECU-03**: Security subpage renders existing account deletion

### Notifications

- [ ] **NOTF-01**: Master notification toggle to enable/disable all in-app notifications
- [ ] **NOTF-02**: Per-category notification toggles: Loans, Inventory, Workspace, System
- [ ] **NOTF-03**: Notification preferences persist to backend (JSONB column) for cross-device sync
- [ ] **NOTF-04**: Toggle changes auto-save without explicit submit button
- [ ] **NOTF-05**: Notification preferences filter alert surfacing only -- SSE data sync unaffected

### Data & Storage

- [ ] **DATA-01**: Storage usage display with progress bar (IndexedDB + cache)
- [ ] **DATA-02**: Clear offline cache button with confirmation dialog
- [ ] **DATA-03**: Persistent storage status indicator and request button
- [ ] **DATA-04**: Manual sync trigger button with last-sync timestamp display
- [ ] **DATA-05**: Import/export section (existing backup/restore relocated)

## Future Requirements

Deferred to post-v1.7.

### Appearance Enhancements

- **APPR-06**: Animated theme transitions
- **APPR-07**: Visual theme preview cards showing light/dark/system appearance

### Notification Enhancements

- **NOTF-06**: Notification sound preferences
- **NOTF-07**: Notification history page
- **NOTF-08**: Per-workspace notification preferences
- **NOTF-09**: Email notification preferences

### Data & Storage Enhancements

- **DATA-06**: Per-store record counts display (Items: 847, Inventory: 1,203)
- **DATA-07**: Storage quota warning banner (>80% usage)
- **DATA-08**: Auto-delete old offline data

### Settings Enhancements

- **HUB-07**: Settings search / cmd+k integration
- **HUB-08**: Custom CSS / theme injection

## Out of Scope

| Feature | Reason |
|---------|--------|
| Granular SSE event filtering | Breaks data sync -- preferences control alert surfacing only |
| Per-store selective cache clear | Leaves inconsistent offline state |
| Export/import user settings JSON | Server sync makes this pointless |
| Tabbed settings layout | Poor mobile UX, no deep linking |
| Settings search | Low ROI with only 7 subpages |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| HUB-01 | Phase 35 | Pending |
| HUB-02 | Phase 35 | Pending |
| HUB-03 | Phase 35 | Pending |
| HUB-04 | Phase 35 | Pending |
| HUB-05 | Phase 35 | Pending |
| HUB-06 | Phase 35 | Pending |
| PROF-01 | Phase 36 | Pending |
| PROF-02 | Phase 36 | Pending |
| PROF-03 | Phase 36 | Pending |
| APPR-01 | Phase 37 | Pending |
| APPR-02 | Phase 37 | Pending |
| APPR-03 | Phase 37 | Pending |
| APPR-04 | Phase 37 | Pending |
| APPR-05 | Phase 37 | Pending |
| LANG-01 | Phase 37 | Pending |
| LANG-02 | Phase 37 | Pending |
| FMTS-01 | Phase 36 | Pending |
| FMTS-02 | Phase 36 | Pending |
| FMTS-03 | Phase 36 | Pending |
| SECU-01 | Phase 36 | Pending |
| SECU-02 | Phase 36 | Pending |
| SECU-03 | Phase 36 | Pending |
| NOTF-01 | Phase 39 | Pending |
| NOTF-02 | Phase 39 | Pending |
| NOTF-03 | Phase 39 | Pending |
| NOTF-04 | Phase 39 | Pending |
| NOTF-05 | Phase 39 | Pending |
| DATA-01 | Phase 38 | Pending |
| DATA-02 | Phase 38 | Pending |
| DATA-03 | Phase 38 | Pending |
| DATA-04 | Phase 38 | Pending |
| DATA-05 | Phase 38 | Pending |

**Coverage:**
- v1.7 requirements: 32 total
- Mapped to phases: 32
- Unmapped: 0

---
*Requirements defined: 2026-02-12*
*Last updated: 2026-02-12 after roadmap creation -- all 32 requirements mapped to phases*
