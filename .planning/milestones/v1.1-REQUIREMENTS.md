# Requirements Archive: v1.1 Offline Entity Extension

**Archived:** 2026-01-25
**Status:** SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Home Warehouse System v1.1

**Defined:** 2026-01-24
**Core Value:** Reliable inventory access anywhere — online or offline — with seamless sync

## v1.1 Requirements

Requirements for Offline Entity Extension milestone. Each maps to roadmap phases.

### Infrastructure

- [x] **INFRA-01**: Mutation queue entries include optional `dependsOn` field for prerequisite tracking
- [x] **INFRA-02**: Sync manager processes mutations in entity-type order (categories, locations, borrowers, containers, items, inventory)
- [x] **INFRA-03**: Hierarchical entities (locations, categories) use topological sort to sync parents before children
- [x] **INFRA-04**: Failed mutations cascade failure to dependent mutations with clear error display
- [x] **INFRA-05**: Parent field changes (`parent_location`, `parent_category_id`) trigger conflict resolution UI *(infrastructure ready)*

### Borrowers

- [x] **BORR-01**: User can create borrower while offline with optimistic UI
- [x] **BORR-02**: User can update borrower details while offline with optimistic UI
- [x] **BORR-03**: Pending borrower rows show "Pending..." badge
- [x] **BORR-04**: Borrower pending count included in global sync status indicator

### Categories

- [x] **CAT-01**: User can create category while offline with optimistic UI
- [x] **CAT-02**: User can update category while offline with optimistic UI
- [x] **CAT-03**: User can create subcategory under existing or pending parent while offline
- [x] **CAT-04**: Pending category rows show "Pending..." badge with parent name context
- [x] **CAT-05**: Category pending count included in global sync status indicator

### Locations

- [x] **LOC-01**: User can create location while offline with optimistic UI
- [x] **LOC-02**: User can update location while offline with optimistic UI
- [x] **LOC-03**: User can create child location under existing or pending parent while offline
- [x] **LOC-04**: Pending location rows show "Pending..." badge with parent name context
- [x] **LOC-05**: Location pending count included in global sync status indicator

### Containers

- [x] **CONT-01**: User can create container while offline with optimistic UI
- [x] **CONT-02**: User can update container while offline with optimistic UI
- [x] **CONT-03**: User can create container in pending location while offline
- [x] **CONT-04**: Pending container rows show "Pending..." badge with location name context
- [x] **CONT-05**: Container pending count included in global sync status indicator

### Inventory

- [x] **INV-01**: User can create inventory record while offline with optimistic UI
- [x] **INV-02**: User can update inventory record while offline with optimistic UI
- [x] **INV-03**: Pending inventory rows show "Pending..." badge with item + location context
- [x] **INV-04**: Inventory quantity/status conflicts trigger conflict resolution UI (existing behavior verified)
- [x] **INV-05**: Inventory pending count included in global sync status indicator

### Conflict History

- [x] **HIST-01**: User can view conflict history page showing all resolved conflicts
- [x] **HIST-02**: Conflict history displays entity type, entity name, conflict fields, resolution, timestamp
- [x] **HIST-03**: User can filter conflict history by entity type
- [x] **HIST-04**: User can filter conflict history by date range

## Out of Scope

Explicitly excluded from v1.1. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Offline delete mutations | Conflict resolution too complex, data loss risk |
| Loan offline support | Loan state conflicts too complex, kept online-only |
| Entity-specific mutation queues | Fragmentation, harder to debug |
| Pre-sync validation against server | Defeats offline purpose |
| Client-side cascade deletes | Let server handle cascade operations |

## Traceability

Which phases cover which requirements. All complete.

| Requirement | Phase | Status |
|-------------|-------|--------|
| INFRA-01 | Phase 6 | Complete |
| INFRA-02 | Phase 6 | Complete |
| INFRA-03 | Phase 7 | Complete |
| INFRA-04 | Phase 6 | Complete |
| INFRA-05 | Phase 6 | Complete |
| BORR-01 | Phase 6 | Complete |
| BORR-02 | Phase 6 | Complete |
| BORR-03 | Phase 6 | Complete |
| BORR-04 | Phase 6 | Complete |
| CAT-01 | Phase 7 | Complete |
| CAT-02 | Phase 7 | Complete |
| CAT-03 | Phase 7 | Complete |
| CAT-04 | Phase 7 | Complete |
| CAT-05 | Phase 7 | Complete |
| LOC-01 | Phase 8 | Complete |
| LOC-02 | Phase 8 | Complete |
| LOC-03 | Phase 8 | Complete |
| LOC-04 | Phase 8 | Complete |
| LOC-05 | Phase 8 | Complete |
| CONT-01 | Phase 9 | Complete |
| CONT-02 | Phase 9 | Complete |
| CONT-03 | Phase 9 | Complete |
| CONT-04 | Phase 9 | Complete |
| CONT-05 | Phase 9 | Complete |
| INV-01 | Phase 10 | Complete |
| INV-02 | Phase 10 | Complete |
| INV-03 | Phase 10 | Complete |
| INV-04 | Phase 10 | Complete |
| INV-05 | Phase 10 | Complete |
| HIST-01 | Phase 11 | Complete |
| HIST-02 | Phase 11 | Complete |
| HIST-03 | Phase 11 | Complete |
| HIST-04 | Phase 11 | Complete |

**Coverage:**
- v1.1 requirements: 29 total
- Shipped: 29
- Adjusted: 0
- Dropped: 0

---

## Milestone Summary

**Shipped:** 29 of 29 v1.1 requirements

**Adjusted during implementation:**
- None — all requirements implemented as specified

**Dropped:**
- None — all requirements delivered

---
*Archived: 2026-01-25 as part of v1.1 milestone completion*
