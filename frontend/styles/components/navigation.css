/* ==========================================================================
   Navigation Components
   Sidebar, menu, and navigation styles
   ========================================================================== */

@layer components {
  /* Sidebar container */
  .retro-sidebar {
    @apply flex flex-col h-full;
    @apply bg-sidebar border-r-4 border-border;
    @apply transition-all duration-300;
  }

  .retro-sidebar--collapsed {
    @apply w-16;
  }

  .retro-sidebar--expanded {
    @apply w-72;
  }

  /* Sidebar header */
  .retro-sidebar__header {
    @apply flex items-center;
    @apply border-b-4 border-border bg-primary text-white;
    @apply min-h-[64px] p-4 gap-4;
  }

  .retro-sidebar--collapsed .retro-sidebar__header {
    @apply min-h-0 p-0 justify-center w-16 h-16;
  }

  .retro-sidebar__logo {
    @apply w-10 h-10 flex items-center justify-center;
    @apply border-4 border-white/30;
  }

  .retro-sidebar__logo-icon {
    @apply w-6 h-6;
  }

  .retro-sidebar__brand {
    @apply retro-title tracking-tight pt-1;
  }

  .retro-sidebar__toggle {
    @apply ml-auto p-1 hover:bg-white/20;
    @apply transition-colors cursor-pointer;
  }

  /* Navigation container */
  .retro-nav {
    @apply flex-1 p-4 overflow-y-auto;
    @apply space-y-2;
  }

  /* Nav item */
  .retro-nav-item {
    @apply flex items-center gap-3 px-4 py-3;
    @apply transition-all cursor-pointer;
    @apply border-4 border-transparent;
  }

  .retro-nav-item:hover {
    @apply bg-card border-border;
    box-shadow: 4px 4px 0px 0px var(--border);
  }

  .retro-nav-item--active {
    @apply bg-card border-border relative;
    box-shadow: 4px 4px 0px 0px var(--border);
  }

  .retro-nav-item--active::before {
    content: '';
    @apply absolute left-0 top-0 bottom-0 w-2 bg-primary;
  }

  /* Collapsed sidebar - icon only */
  .retro-sidebar--collapsed .retro-nav-item,
  .retro-sidebar--collapsed .retro-nav-group__header {
    @apply justify-center p-0 mx-auto;
    width: 40px !important;
    height: 40px !important;
  }

  .retro-sidebar--collapsed .retro-nav-item:hover,
  .retro-sidebar--collapsed .retro-nav-item--active,
  .retro-sidebar--collapsed .retro-nav-group__header:hover {
    box-shadow: 2px 2px 0px 0px var(--border);
  }


  .retro-nav-item__icon {
    @apply w-5 h-5 flex-shrink-0;
  }

  .retro-nav-item__label {
    @apply retro-nav;
  }

  .retro-nav-item--active .retro-nav-item__label {
    @apply text-foreground;
  }

  .retro-nav-item__label--muted {
    @apply text-muted-foreground;
  }

  /* Nav group (collapsible section) */
  .retro-nav-group {
    @apply space-y-1;
  }

  .retro-nav-group__header {
    @apply flex items-center gap-3 px-4 py-3;
    @apply cursor-pointer transition-all;
    @apply border-4 border-transparent;
  }

  .retro-nav-group__header:hover {
    @apply bg-card border-border;
    box-shadow: 4px 4px 0px 0px var(--border);
  }

  .retro-nav-group__title {
    @apply flex-1 retro-nav text-muted-foreground;
  }

  .retro-nav-group__title--active {
    @apply text-primary;
  }

  .retro-nav-group__chevron {
    @apply w-4 h-4 transition-transform;
  }

  .retro-nav-group--open .retro-nav-group__chevron {
    @apply rotate-90;
  }

  .retro-nav-group__items {
    @apply pl-4 space-y-1;
  }

  /* Nav divider */
  .retro-nav-divider {
    @apply pt-4 pb-2 px-4;
    @apply flex items-center gap-2;
  }

  .retro-nav-divider__line {
    @apply h-[2px] flex-1 bg-foreground/20;
  }

  .retro-nav-divider__text {
    @apply retro-divider text-muted-foreground;
  }

  /* Sidebar footer */
  .retro-sidebar__footer {
    @apply border-t-4 border-border p-2;
  }

  /* User menu in sidebar */
  .retro-user-menu {
    @apply relative;
  }

  .retro-user-menu__trigger {
    @apply w-full flex items-center gap-3 p-2;
    @apply border-4 border-transparent;
    @apply hover:bg-card hover:border-border transition-all;
    @apply cursor-pointer;
  }

  .retro-user-menu__avatar {
    @apply w-10 h-10 flex items-center justify-center;
    @apply border-4 border-border text-white;
    @apply retro-badge;
  }

  .retro-user-menu__info {
    @apply flex-1 min-w-0 text-left;
  }

  .retro-user-menu__name {
    @apply retro-nav truncate pt-1;
  }

  .retro-user-menu__role {
    @apply retro-caption text-muted-foreground truncate;
  }

  .retro-user-menu__chevron {
    @apply w-4 h-4 text-muted-foreground;
  }

  /* User menu dropdown */
  .retro-user-menu__dropdown {
    @apply absolute bottom-full left-0 right-0 mb-2;
    @apply bg-card border-4 border-border;
    @apply py-1;
    box-shadow: 4px 4px 0px 0px var(--border);
  }

  .retro-user-menu__item {
    @apply w-full flex items-center gap-3 px-3 py-2;
    @apply retro-nav;
    @apply hover:bg-muted transition-colors;
    @apply border-b-2 border-dashed border-muted last:border-b-0;
  }

  .retro-user-menu__item--danger {
    @apply text-primary;
  }

  /* Notification badge on nav item */
  .retro-nav-item__badge {
    @apply ml-auto;
    @apply min-w-5 h-5 px-1;
    @apply bg-primary text-white text-xs;
    @apply flex items-center justify-center;
    @apply border-2 border-card;
  }

  /* Scroll indicators for long nav */
  .retro-nav__scroll-indicator {
    @apply absolute left-0 right-0 h-8;
    @apply pointer-events-none;
    @apply flex items-center justify-center;
  }

  .retro-nav__scroll-indicator--top {
    @apply top-0 bg-gradient-to-b from-sidebar to-transparent;
  }

  .retro-nav__scroll-indicator--bottom {
    @apply bottom-0 bg-gradient-to-t from-sidebar to-transparent;
  }

  .retro-nav__scroll-icon {
    @apply w-4 h-4 text-muted-foreground animate-bounce;
  }

  /* Breadcrumb navigation */
  .retro-breadcrumb {
    @apply flex items-center gap-2;
    @apply retro-small text-muted-foreground;
  }

  .retro-breadcrumb__item {
    @apply hover:text-foreground transition-colors;
  }

  .retro-breadcrumb__separator {
    @apply text-muted-foreground;
  }

  .retro-breadcrumb__current {
    @apply text-foreground;
  }

  /* Tab navigation */
  .retro-tabs {
    @apply flex border-b-4 border-border;
  }

  .retro-tab {
    @apply px-4 py-2 -mb-1;
    @apply border-4 border-transparent border-b-0;
    @apply retro-heading text-muted-foreground;
    @apply cursor-pointer transition-colors;
  }

  .retro-tab:hover {
    @apply text-foreground;
  }

  .retro-tab--active {
    @apply bg-card border-border text-foreground;
  }

  /* Quick action bar */
  .retro-quick-actions {
    @apply flex items-center gap-2;
  }

  .retro-quick-action {
    @apply p-2 border-4 border-border;
    @apply hover:bg-muted transition-colors;
    @apply cursor-pointer;
  }

  .retro-quick-action__icon {
    @apply w-5 h-5;
  }
}
